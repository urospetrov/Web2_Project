{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\irenv\\\\Desktop\\\\Web2-Front\\\\src\\\\components\\\\Registracija.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport ImageUploader from \"../services/ArtikalService\";\nimport jwtDecode from \"jwt-decode\";\nimport { isPast, differenceInYears } from \"date-fns\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Registracija = () => {\n  _s();\n  const navigate = useNavigate();\n  const [showNotification, setShowNotification] = useState(false);\n  const [notificationMessage, setNotificationMessage] = useState(\"\");\n  const [notificationVisible, setNotificationVisible] = useState(false);\n  const [email, setEmail] = useState(\"\");\n  const [isValid, setIsValid] = useState(true);\n  const [isTypingDate, setIsTypingDate] = useState(false);\n  const [passwordConfirmation, setPasswordConfirmation] = useState(\"\");\n  const [isPasswordMatch, setIsPasswordMatch] = useState(true);\n  const [selectDate, setDate] = useState(\"\");\n  const [selectPicture, setPicture] = useState(\"\");\n  const [UploadedImage, setUploadedImage] = useState(null);\n  const [slikaKorisnika, setSlikaKorisnika] = useState(\"\");\n  const [tipKorisnika, setTipKorisnika] = useState(0);\n  const [postarina, setPostarina] = useState(0);\n  const [user, setUser] = useState({});\n  const [formData, setFormData] = useState({\n    KorisnickoIme: \"\",\n    Email: \"\",\n    Lozinka: \"\",\n    Ime: \"\",\n    Prezime: \"\",\n    DatumRodjenja: \"2000-01-01\",\n    Adresa: \"\",\n    TipKorisnika: \"Kupac\",\n    SlikaKorisnika: \"\",\n    Verifikovan: false,\n    Postarina: 0\n  });\n  function handleCallbackResponse(response) {\n    var userObject = jwtDecode(response.credential);\n    var prezime = userObject.family_name;\n    var slikaKorisnika = userObject.picture;\n    var email = userObject.email;\n    var ime = userObject.given_name;\n    setUser(userObject);\n    document.getElementById(\"signInDiv\").hidden = true;\n    var dropdown = document.getElementById(\"mojDropdown\");\n    console.log(dropdown.value);\n    //slanje zahteva POST na server\n    fetch(`https://localhost:44388/Korisnik/getKorisnikToken?email=${email}&ime=${ime}&prezime=${prezime}&slikaKorisnika=${slikaKorisnika}&tipKorisnika=${dropdown.value}`, {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      mode: \"cors\"\n    }).then(response => response.json()).then(data => {\n      console.log(data);\n      console.log(\"Response from server:\", data);\n      var jwtToken = data[\"token\"];\n      localStorage.setItem(\"token\", jwtToken);\n      //setTemp(true);\n      //setRequestCompleted((prevRequestCompleted) => true);\n      //console.log(requestCompleted);\n      window.location.href = \"/ulogovan-korisnik/profil\";\n    }).catch(error => {\n      console.error(\"Error occurred:\", error);\n    });\n  }\n  useEffect(() => {\n    /* global google */\n    google.accounts.id.initialize({\n      client_id: \"220695539326-hv8bcrgthi6ikj1sf0n1g2j2grbc4v9d.apps.googleusercontent.com\",\n      callback: handleCallbackResponse\n    });\n    google.accounts.id.renderButton(document.getElementById(\"signInDiv\"), {\n      theme: \"outline\",\n      size: \"large\"\n    });\n    //google.accounts.id.prompt();\n  }, []);\n  const handleChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    if (name === \"TipKorisnika\") {\n      if (value === \"Kupac\") {\n        setTipKorisnika(0);\n      } else if (value === \"Prodavac\") {\n        setTipKorisnika(1);\n      }\n    }\n    setFormData({\n      ...formData,\n      [name]: value\n    });\n  };\n  const handleImageChange = e => {\n    setFormData({\n      ...formData,\n      SlikaKorisnika: e.target.files[0]\n    });\n  };\n  const handleSubmit = async event => {\n    event.preventDefault();\n    //dalje logika za slanje na server\n    let temp = 0;\n    if (tipKorisnika === \"Prodavac\") {\n      temp = 1;\n    } else if (tipKorisnika === \"Kupac\") {\n      temp = 0;\n    }\n    console.log(JSON.stringify({\n      ...formData,\n      DatumRodjenja: selectDate,\n      SlikaKorisnika: slikaKorisnika,\n      TipKorisnika: temp\n    }));\n    //const firstFetchPromise = new Promise((resolve, reject) => {\n    //setTimeout(() => {\n    fetch(\"https://localhost:44388/Korisnik\", {\n      method: \"POST\",\n      body: JSON.stringify({\n        ...formData,\n        DatumRodjenja: selectDate,\n        SlikaKorisnika: slikaKorisnika,\n        TipKorisnika: temp\n      }),\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      mode: \"cors\"\n    }).then(Response => Response.json()).then(data => {\n      console.log(\"POSLALI SMO NA BEK\");\n      console.log(\"Sta je bek vratio nakon kreiranja korisnika: \" + JSON.stringify(data));\n      //resolve(data); // RESOLVE NAKON STO SE ZAVRSI\n    }).catch(error => {\n      console.log(error);\n    });\n    //}, 2000);\n    //});\n\n    if (formData.TipKorisnika === \"Prodavac\") {\n      setNotificationMessage(\"Registracija je uspešno zabeležena. Sačekajte da se obradi. O uspesnoj registraciji bicete obavesteni putem e-mail adrese...\");\n      setShowNotification(true);\n      const emailData = {\n        Receiver: email,\n        Subject: \"Registracija(WEB2)\",\n        Body: \"Postovani, uskoro cete primiti jos jedan mejl da Vas obavestimo o verifikaciji vaseg naloga.\"\n      };\n      console.log(JSON.stringify(emailData));\n\n      //await firstFetchPromise;\n      fetch(\n      //pre fetch ide await\n      \"https://localhost:44388/Email/emailService\", {\n        method: \"POST\",\n        body: JSON.stringify(emailData),\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        mode: \"cors\"\n      }).then(response => response.json()).then(data => {\n        console.log(\"POGODILI BEK.\");\n      }).catch(error => {\n        console.log(error);\n      });\n      setNotificationVisible(true);\n      setTimeout(() => {\n        setNotificationVisible(false);\n        navigate(\"/logovanje\");\n      }, 5000); // 5000 milisekundi = 5 sekundi\n    } else {\n      navigate(\"/logovanje\");\n    }\n  };\n  const handleImageUpload = imageData => {\n    setUploadedImage(imageData);\n    setSlikaKorisnika(imageData);\n  };\n  const handlePasswordConfirmationChange = e => {\n    const confirmationValue = e.target.value;\n    setPasswordConfirmation(confirmationValue);\n    if (confirmationValue === formData.Lozinka) {\n      setIsPasswordMatch(true);\n    } else {\n      setIsPasswordMatch(false);\n    }\n  };\n  const handleDateChange = e => {\n    handleChange(e); // Prvo pozivamo handleChange funkciju da se ažurira formData\n    setDate(e.target.value);\n  };\n  const handleTipChange = e => {\n    handleChange(e);\n    setTipKorisnika(e.target.value);\n  };\n  const handlePostarinaChange = e => {\n    handleChange(e);\n    setPostarina(e.target.value);\n  };\n  const handleEmailChange = e => {\n    handleChange(e);\n    setEmail(e.target.value);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container text-center mt-5\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      style: {\n        color: \"#28a745\"\n      },\n      children: \"Registracija\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"korisnickoIme\",\n          children: \"Korisni\\u010Dko ime:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 245,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          id: \"korisnickoIme\",\n          name: \"KorisnickoIme\",\n          value: formData.KorisnickoIme,\n          onChange: handleChange,\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 246,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 254,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"email\",\n          children: \"E-mail adresa:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 258,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"email\",\n          id: \"email\",\n          name: \"Email\",\n          value: formData.Email,\n          onChange: handleEmailChange,\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 259,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 267,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 257,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"lozinka\",\n          children: \"Lozinka:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 271,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"password\",\n          id: \"lozinka\",\n          name: \"Lozinka\",\n          value: formData.Lozinka,\n          onChange: handleChange,\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 272,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 280,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 270,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"potvrdaLozinke\",\n          children: \"Potvrdi lozinku:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 284,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"password\",\n          id: \"potvrdaLozinke\",\n          name: \"PotvrdaLozinke\",\n          value: passwordConfirmation,\n          onChange: handlePasswordConfirmationChange,\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 285,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 293,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 283,\n        columnNumber: 9\n      }, this), !isPasswordMatch && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          color: \"red\"\n        },\n        children: \"Lozinke se ne podudaraju.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 297,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"ime\",\n          children: \"Ime:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 301,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          id: \"ime\",\n          name: \"Ime\",\n          value: formData.Ime,\n          onChange: handleChange,\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 302,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 310,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 300,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"prezime\",\n          children: \"Prezime:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 314,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          id: \"prezime\",\n          name: \"Prezime\",\n          value: formData.Prezime,\n          onChange: handleChange,\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 315,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 323,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 313,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"datumRodjenja\",\n        children: \"Datum ro\\u0111enja:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 326,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"date\",\n        value: selectDate,\n        onChange: handleDateChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 327,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 328,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"adresa\",\n        children: \"Adresa:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 330,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        id: \"adresa\",\n        name: \"Adresa\",\n        value: formData.Adresa,\n        onChange: handleChange,\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 331,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 339,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"TipKorisnika\",\n        children: \"Tip korisnika:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 341,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        id: \"tipKorisnika\",\n        name: \"TipKorisnika\",\n        value: formData.TipKorisnika,\n        onChange: handleTipChange,\n        required: true,\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"Kupac\",\n          children: \"Kupac\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 349,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"Prodavac\",\n          children: \"Prodavac\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 350,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 342,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 352,\n        columnNumber: 9\n      }, this), formData.TipKorisnika === \"Prodavac\" && /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"postarina\",\n          children: \"Postarina:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 356,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          id: \"postarina\",\n          name: \"Postarina\",\n          value: formData.Postarina,\n          onChange: handlePostarinaChange,\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 357,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 365,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 355,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"slika\",\n        children: \"Slika profila:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 369,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ImageUploader, {\n        onImageUpload: handleImageUpload\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 370,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 371,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        className: \"btn btn-success mt-3\",\n        children: \"Registruj se\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 373,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 243,\n      columnNumber: 7\n    }, this), showNotification && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"notification\",\n      style: {\n        background: \"#d4edda\",\n        color: \"#155724\"\n      },\n      children: notificationMessage\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 377,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          style: {\n            color: \"#28a745\"\n          },\n          children: \"Prijavite se preko google naloga\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 383,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          id: \"mojDropdown\",\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"Kupac\",\n            children: \"Kupac\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 385,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"Prodavac\",\n            children: \"Prodavac\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 386,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 384,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 382,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"d-flex justify-content-center align-items-center mt-3\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 389,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 380,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 241,\n    columnNumber: 5\n  }, this);\n};\n_s(Registracija, \"DCtKXA8xNoH5OGkNZ4x34rAsImc=\", false, function () {\n  return [useNavigate];\n});\n_c = Registracija;\nexport default Registracija;\nvar _c;\n$RefreshReg$(_c, \"Registracija\");","map":{"version":3,"names":["React","useState","useEffect","useNavigate","ImageUploader","jwtDecode","isPast","differenceInYears","jsxDEV","_jsxDEV","Registracija","_s","navigate","showNotification","setShowNotification","notificationMessage","setNotificationMessage","notificationVisible","setNotificationVisible","email","setEmail","isValid","setIsValid","isTypingDate","setIsTypingDate","passwordConfirmation","setPasswordConfirmation","isPasswordMatch","setIsPasswordMatch","selectDate","setDate","selectPicture","setPicture","UploadedImage","setUploadedImage","slikaKorisnika","setSlikaKorisnika","tipKorisnika","setTipKorisnika","postarina","setPostarina","user","setUser","formData","setFormData","KorisnickoIme","Email","Lozinka","Ime","Prezime","DatumRodjenja","Adresa","TipKorisnika","SlikaKorisnika","Verifikovan","Postarina","handleCallbackResponse","response","userObject","credential","prezime","family_name","picture","ime","given_name","document","getElementById","hidden","dropdown","console","log","value","fetch","method","headers","mode","then","json","data","jwtToken","localStorage","setItem","window","location","href","catch","error","google","accounts","id","initialize","client_id","callback","renderButton","theme","size","handleChange","e","name","target","handleImageChange","files","handleSubmit","event","preventDefault","temp","JSON","stringify","body","Response","emailData","Receiver","Subject","Body","setTimeout","handleImageUpload","imageData","handlePasswordConfirmationChange","confirmationValue","handleDateChange","handleTipChange","handlePostarinaChange","handleEmailChange","className","children","style","color","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","htmlFor","type","onChange","required","onImageUpload","background","_c","$RefreshReg$"],"sources":["C:/Users/irenv/Desktop/Web2-Front/src/components/Registracija.js"],"sourcesContent":["import React, { useState,useEffect } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport ImageUploader from \"../services/ArtikalService\";\r\nimport jwtDecode from \"jwt-decode\";\r\nimport { isPast, differenceInYears } from \"date-fns\";\r\n\r\nconst Registracija = () => {\r\n  const navigate = useNavigate();\r\n  const [showNotification, setShowNotification] = useState(false);\r\n  const [notificationMessage, setNotificationMessage] = useState(\"\");\r\n  const [notificationVisible, setNotificationVisible] = useState(false);\r\n  const [email, setEmail] = useState(\"\");\r\n  const [isValid, setIsValid] = useState(true);\r\n  const [isTypingDate, setIsTypingDate] = useState(false);\r\n  const [passwordConfirmation, setPasswordConfirmation] = useState(\"\");\r\n  const [isPasswordMatch, setIsPasswordMatch] = useState(true);\r\n  const [selectDate, setDate] = useState(\"\");\r\n  const [selectPicture, setPicture] = useState(\"\");\r\n  const [UploadedImage, setUploadedImage] = useState(null);\r\n  const [slikaKorisnika, setSlikaKorisnika] = useState(\"\");\r\n  const [tipKorisnika, setTipKorisnika] = useState(0);\r\n  const [postarina, setPostarina] = useState(0);\r\n\r\n  const [user, setUser] = useState({});\r\n\r\n  const [formData, setFormData] = useState({\r\n    KorisnickoIme: \"\",\r\n    Email: \"\",\r\n    Lozinka: \"\",\r\n    Ime: \"\",\r\n    Prezime: \"\",\r\n    DatumRodjenja: \"2000-01-01\",\r\n    Adresa: \"\",\r\n    TipKorisnika: \"Kupac\",\r\n    SlikaKorisnika: \"\",\r\n    Verifikovan: false,\r\n    Postarina: 0,\r\n  });\r\n\r\n  function handleCallbackResponse(response){\r\n    var userObject = jwtDecode(response.credential);\r\n    var prezime = userObject.family_name;\r\n    var slikaKorisnika = userObject.picture;\r\n    var email = userObject.email;\r\n    var ime = userObject.given_name;\r\n\r\n    setUser(userObject);\r\n    document.getElementById(\"signInDiv\").hidden = true;\r\n    var dropdown = document.getElementById(\"mojDropdown\");\r\n    console.log(dropdown.value);\r\n      //slanje zahteva POST na server\r\n      fetch(\r\n        `https://localhost:44388/Korisnik/getKorisnikToken?email=${email}&ime=${ime}&prezime=${prezime}&slikaKorisnika=${slikaKorisnika}&tipKorisnika=${dropdown.value}`,\r\n        {\r\n          method: \"GET\",\r\n          headers: {\r\n            \"Content-Type\": \"application/json\",\r\n          },\r\n          mode: \"cors\",\r\n        }\r\n      )\r\n        .then((response) => response.json())\r\n        .then((data) => {\r\n          console.log(data);\r\n          console.log(\"Response from server:\", data);\r\n          var jwtToken = data[\"token\"];\r\n          localStorage.setItem(\"token\", jwtToken);\r\n          //setTemp(true);\r\n          //setRequestCompleted((prevRequestCompleted) => true);\r\n          //console.log(requestCompleted);\r\n          window.location.href = \"/ulogovan-korisnik/profil\";\r\n        })\r\n        .catch((error) => {\r\n          console.error(\"Error occurred:\", error);\r\n        });\r\n\r\n  }\r\n\r\n  useEffect(() => {\r\n      /* global google */\r\n      google.accounts.id.initialize({\r\n        client_id:\r\n        \"220695539326-hv8bcrgthi6ikj1sf0n1g2j2grbc4v9d.apps.googleusercontent.com\",\r\n        callback: handleCallbackResponse,\r\n      });\r\n  \r\n      google.accounts.id.renderButton(document.getElementById(\"signInDiv\"), {\r\n        theme: \"outline\",\r\n        size: \"large\",\r\n      });\r\n    //google.accounts.id.prompt();\r\n  }, []);\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n\r\n    if (name === \"TipKorisnika\") {\r\n      if (value === \"Kupac\") {\r\n        setTipKorisnika(0);\r\n      } else if (value === \"Prodavac\") {\r\n        setTipKorisnika(1);\r\n      }\r\n    }\r\n    setFormData({\r\n      ...formData,\r\n      [name]: value,\r\n    });\r\n  };\r\n\r\n  const handleImageChange = (e) => {\r\n    setFormData({\r\n      ...formData,\r\n      SlikaKorisnika: e.target.files[0],\r\n    });\r\n  };\r\n\r\n  const handleSubmit = async (event) => {\r\n    event.preventDefault();\r\n    //dalje logika za slanje na server\r\n    let temp = 0;\r\n    if (tipKorisnika === \"Prodavac\") {\r\n      temp = 1;\r\n    } else if (tipKorisnika === \"Kupac\") {\r\n      temp = 0;\r\n    }\r\n    console.log(\r\n      JSON.stringify({\r\n        ...formData,\r\n        DatumRodjenja: selectDate,\r\n        SlikaKorisnika: slikaKorisnika,\r\n        TipKorisnika: temp,\r\n      })\r\n    );\r\n    //const firstFetchPromise = new Promise((resolve, reject) => {\r\n    //setTimeout(() => {\r\n    fetch(\"https://localhost:44388/Korisnik\", {\r\n      method: \"POST\",\r\n      body: JSON.stringify({\r\n        ...formData,\r\n        DatumRodjenja: selectDate,\r\n        SlikaKorisnika: slikaKorisnika,\r\n        TipKorisnika: temp,\r\n      }),\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      mode: \"cors\",\r\n    })\r\n      .then((Response) => Response.json())\r\n      .then((data) => {\r\n        console.log(\"POSLALI SMO NA BEK\");\r\n        console.log(\r\n          \"Sta je bek vratio nakon kreiranja korisnika: \" + JSON.stringify(data)\r\n        );\r\n        //resolve(data); // RESOLVE NAKON STO SE ZAVRSI\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n      });\r\n    //}, 2000);\r\n    //});\r\n\r\n    if (formData.TipKorisnika === \"Prodavac\") {\r\n      setNotificationMessage(\r\n        \"Registracija je uspešno zabeležena. Sačekajte da se obradi. O uspesnoj registraciji bicete obavesteni putem e-mail adrese...\"\r\n      );\r\n      setShowNotification(true);\r\n\r\n      const emailData = {\r\n        Receiver: email,\r\n        Subject: \"Registracija(WEB2)\",\r\n        Body:\r\n          \"Postovani, uskoro cete primiti jos jedan mejl da Vas obavestimo o verifikaciji vaseg naloga.\",\r\n      };\r\n      console.log(JSON.stringify(emailData));\r\n\r\n      //await firstFetchPromise;\r\n      fetch(\r\n        //pre fetch ide await\r\n        \"https://localhost:44388/Email/emailService\",\r\n        {\r\n          method: \"POST\",\r\n          body: JSON.stringify(emailData),\r\n          headers: {\r\n            \"Content-Type\": \"application/json\",\r\n          },\r\n          mode: \"cors\",\r\n        }\r\n      )\r\n        .then((response) => response.json())\r\n        .then((data) => {\r\n          console.log(\"POGODILI BEK.\");\r\n        })\r\n        .catch((error) => {\r\n          console.log(error);\r\n        });\r\n\r\n      setNotificationVisible(true);\r\n\r\n      setTimeout(() => {\r\n        setNotificationVisible(false);\r\n        navigate(\"/logovanje\");\r\n      }, 5000); // 5000 milisekundi = 5 sekundi\r\n    } else {\r\n      navigate(\"/logovanje\");\r\n    }\r\n  };\r\n\r\n  const handleImageUpload = (imageData) => {\r\n    setUploadedImage(imageData);\r\n    setSlikaKorisnika(imageData);\r\n  };\r\n  const handlePasswordConfirmationChange = (e) => {\r\n    const confirmationValue = e.target.value;\r\n    setPasswordConfirmation(confirmationValue);\r\n\r\n    if (confirmationValue === formData.Lozinka) {\r\n      setIsPasswordMatch(true);\r\n    } else {\r\n      setIsPasswordMatch(false);\r\n    }\r\n  };\r\n  const handleDateChange = (e) => {\r\n    handleChange(e); // Prvo pozivamo handleChange funkciju da se ažurira formData\r\n    setDate(e.target.value);\r\n  };\r\n  const handleTipChange = (e) => {\r\n    handleChange(e);\r\n    setTipKorisnika(e.target.value);\r\n  };\r\n  const handlePostarinaChange = (e) => {\r\n    handleChange(e);\r\n    setPostarina(e.target.value);\r\n  };\r\n  const handleEmailChange = (e) => {\r\n    handleChange(e);\r\n    setEmail(e.target.value);\r\n  };\r\n\r\n  return (\r\n    <div className=\"container text-center mt-5\">\r\n      <h1 style={{ color: \"#28a745\" }}>Registracija</h1>\r\n      <form onSubmit={handleSubmit}>\r\n      <div className=\"form-group\">\r\n        <label htmlFor=\"korisnickoIme\">Korisničko ime:</label>\r\n        <input\r\n          type=\"text\"\r\n          id=\"korisnickoIme\"\r\n          name=\"KorisnickoIme\"\r\n          value={formData.KorisnickoIme}\r\n          onChange={handleChange}\r\n          required\r\n        />\r\n        <br />\r\n        </div>\r\n\r\n        <div className=\"form-group\">\r\n        <label htmlFor=\"email\">E-mail adresa:</label>\r\n        <input\r\n          type=\"email\"\r\n          id=\"email\"\r\n          name=\"Email\"\r\n          value={formData.Email}\r\n          onChange={handleEmailChange}\r\n          required\r\n        />\r\n        <br />\r\n        </div>\r\n\r\n        <div className=\"form-group\">\r\n        <label htmlFor=\"lozinka\">Lozinka:</label>\r\n        <input\r\n          type=\"password\"\r\n          id=\"lozinka\"\r\n          name=\"Lozinka\"\r\n          value={formData.Lozinka}\r\n          onChange={handleChange}\r\n          required\r\n        />\r\n        <br />\r\n        </div>\r\n\r\n        <div className=\"form-group\">\r\n        <label htmlFor=\"potvrdaLozinke\">Potvrdi lozinku:</label>\r\n        <input\r\n          type=\"password\"\r\n          id=\"potvrdaLozinke\"\r\n          name=\"PotvrdaLozinke\"\r\n          value={passwordConfirmation}\r\n          onChange={handlePasswordConfirmationChange}\r\n          required\r\n        />\r\n        <br />\r\n        </div>\r\n\r\n        {!isPasswordMatch && (\r\n          <div style={{ color: \"red\" }}>Lozinke se ne podudaraju.</div>\r\n        )}\r\n\r\n        <div className=\"form-group\">\r\n        <label htmlFor=\"ime\">Ime:</label>\r\n        <input\r\n          type=\"text\"\r\n          id=\"ime\"\r\n          name=\"Ime\"\r\n          value={formData.Ime}\r\n          onChange={handleChange}\r\n          required\r\n        />\r\n        <br />\r\n        </div>\r\n\r\n        <div className=\"form-group\">\r\n        <label htmlFor=\"prezime\">Prezime:</label>\r\n        <input\r\n          type=\"text\"\r\n          id=\"prezime\"\r\n          name=\"Prezime\"\r\n          value={formData.Prezime}\r\n          onChange={handleChange}\r\n          required\r\n        />\r\n        <br />\r\n        </div>\r\n\r\n        <label htmlFor=\"datumRodjenja\">Datum rođenja:</label>\r\n        <input type=\"date\" value={selectDate} onChange={handleDateChange} />\r\n        <br />\r\n\r\n        <label htmlFor=\"adresa\">Adresa:</label>\r\n        <input\r\n          type=\"text\"\r\n          id=\"adresa\"\r\n          name=\"Adresa\"\r\n          value={formData.Adresa}\r\n          onChange={handleChange}\r\n          required\r\n        />\r\n        <br />\r\n\r\n        <label htmlFor=\"TipKorisnika\">Tip korisnika:</label>\r\n        <select\r\n          id=\"tipKorisnika\"\r\n          name=\"TipKorisnika\"\r\n          value={formData.TipKorisnika}\r\n          onChange={handleTipChange}\r\n          required\r\n        >\r\n          <option value=\"Kupac\">Kupac</option>\r\n          <option value=\"Prodavac\">Prodavac</option>\r\n        </select>\r\n        <br />\r\n\r\n        {formData.TipKorisnika === \"Prodavac\" && (\r\n          <div>\r\n            <label htmlFor=\"postarina\">Postarina:</label>\r\n            <input\r\n              type=\"number\"\r\n              id=\"postarina\"\r\n              name=\"Postarina\"\r\n              value={formData.Postarina}\r\n              onChange={handlePostarinaChange}\r\n              required\r\n            />\r\n            <br />\r\n          </div>\r\n        )}\r\n\r\n        <label htmlFor=\"slika\">Slika profila:</label>\r\n        <ImageUploader onImageUpload={handleImageUpload} />\r\n        <br />\r\n\r\n        <button type=\"submit\" className=\"btn btn-success mt-3\">Registruj se</button>\r\n      </form>\r\n\r\n      {showNotification && (\r\n        <div className=\"notification\" style={{ background: \"#d4edda\", color: \"#155724\" }}>{notificationMessage}</div>\r\n      )}\r\n\r\n      <div>\r\n\r\n        <div className=\"mt-4\">\r\n          <h1 style={{ color: \"#28a745\" }}>Prijavite se preko google naloga</h1>\r\n          <select id=\"mojDropdown\">\r\n            <option value=\"Kupac\">Kupac</option>\r\n            <option value=\"Prodavac\">Prodavac</option>\r\n          </select>\r\n        </div>\r\n        <div className=\"d-flex justify-content-center align-items-center mt-3\"></div>\r\n      \r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Registracija;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}